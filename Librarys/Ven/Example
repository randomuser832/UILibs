local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local UILibrary = {}
local opened = true

-- Create UI container
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "TyroneUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 500, 0, 320)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -160)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.BorderSizePixel = 0
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui
MainFrame.ClipsDescendants = true
MainFrame.BackgroundTransparency = 0
MainFrame.ZIndex = 2
MainFrame.Visible = true
MainFrame.AutomaticSize = Enum.AutomaticSize.None
MainFrame.SizeConstraint = Enum.SizeConstraint.RelativeXY
MainFrame.ClipsDescendants = true
MainFrame.BackgroundTransparency = 0
MainFrame.BorderSizePixel = 0
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame:FindFirstChildOfClass("UICorner") or Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 10)

-- Title bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame
Instance.new("UICorner", TitleBar).CornerRadius = UDim.new(0, 6)

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Text = "tyrone_darealest UI"
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 14
TitleLabel.BackgroundTransparency = 1
TitleLabel.Position = UDim2.new(0, 10, 0, 5)
TitleLabel.Size = UDim2.new(1, -40, 0, 20)
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = TitleBar

-- Minimize button
local Minimize = Instance.new("TextButton")
Minimize.Text = "-"
Minimize.Font = Enum.Font.GothamBold
Minimize.TextColor3 = Color3.fromRGB(255, 255, 255)
Minimize.TextSize = 16
Minimize.Size = UDim2.new(0, 30, 0, 25)
Minimize.Position = UDim2.new(1, -35, 0, 2)
Minimize.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Minimize.BorderSizePixel = 0
Minimize.Parent = TitleBar
Instance.new("UICorner", Minimize).CornerRadius = UDim.new(0, 6)

-- Tabs container
local TabHolder = Instance.new("Frame")
TabHolder.Name = "TabHolder"
TabHolder.Position = UDim2.new(0, 0, 0, 30)
TabHolder.Size = UDim2.new(0, 120, 1, -30)
TabHolder.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
TabHolder.BorderSizePixel = 0
TabHolder.Parent = MainFrame
Instance.new("UICorner", TabHolder).CornerRadius = UDim.new(0, 6)

local TabButtons = Instance.new("UIListLayout")
TabButtons.SortOrder = Enum.SortOrder.LayoutOrder
TabButtons.Padding = UDim.new(0, 4)
TabButtons.Parent = TabHolder

-- Content Frame
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Position = UDim2.new(0, 125, 0, 35)
ContentFrame.Size = UDim2.new(1, -135, 1, -45)
ContentFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ContentFrame.BorderSizePixel = 0
ContentFrame.Parent = MainFrame
Instance.new("UICorner", ContentFrame).CornerRadius = UDim.new(0, 8)

local function createTab(name)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -10, 0, 30)
	button.Text = name
	button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.Font = Enum.Font.GothamBold
	button.TextSize = 13
	button.BorderSizePixel = 0
	button.Parent = TabHolder
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	local tabFrame = Instance.new("Frame")
	tabFrame.Name = name
	tabFrame.Size = UDim2.new(1, 0, 1, 0)
	tabFrame.BackgroundTransparency = 1
	tabFrame.Visible = false
	tabFrame.Parent = ContentFrame

	local layout = Instance.new("UIListLayout", tabFrame)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Padding = UDim.new(0, 6)

	button.MouseButton1Click:Connect(function()
		for _, child in pairs(ContentFrame:GetChildren()) do
			if child:IsA("Frame") then
				child.Visible = false
			end
		end
		for _, btn in pairs(TabHolder:GetChildren()) do
			if btn:IsA("TextButton") then
				btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
			end
		end
		button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
		tabFrame.Visible = true
	end)

	return tabFrame
end

-- Public create tab function
function UILibrary:CreateTab(tabName)
	return createTab(tabName)
end

-- Button
function UILibrary:AddButton(tab, text, callback)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -10, 0, 30)
	button.Text = text
	button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.Font = Enum.Font.Gotham
	button.TextSize = 13
	button.BorderSizePixel = 0
	button.Parent = tab
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	button.MouseButton1Click:Connect(function()
		pcall(callback)
	end)
end

-- Toggle
function UILibrary:AddToggle(tab, text, default, callback)
	local toggle = Instance.new("TextButton")
	toggle.Size = UDim2.new(1, -10, 0, 30)
	toggle.Text = text .. ": OFF"
	toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
	toggle.Font = Enum.Font.Gotham
	toggle.TextSize = 13
	toggle.BorderSizePixel = 0
	toggle.Parent = tab
	Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 6)

	local state = default or false
	if state then
		toggle.Text = text .. ": ON"
	end

	toggle.MouseButton1Click:Connect(function()
		state = not state
		toggle.Text = text .. ": " .. (state and "ON" or "OFF")
		pcall(callback, state)
	end)
end

-- Minimize animation
Minimize.MouseButton1Click:Connect(function()
	opened = not opened
	local goal = { Size = opened and UDim2.new(0, 500, 0, 320) or UDim2.new(0, 500, 0, 35) }
	TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), goal):Play()

	for _, child in pairs(MainFrame:GetChildren()) do
		if child ~= TitleBar then
			child.Visible = opened
		end
	end
end)

return UILibrary
